{"version":3,"sources":["keditor-component-youtube.js"],"names":["$","KEditor","keditor","flog","log","components","getContent","component","componentContent","children","find","remove","html","settingEnabled","settingTitle","initSettingForm","form","append","btnEdit","on","e","preventDefault","inputData","prompt","youtubeRegex","match","getSettingComponent","attr","alert","btn169","removeClass","addClass","btn43","chkAutoplay","embedItem","currentUrl","newUrl","replace","is","showSettingForm","src","prop","indexOf","jQuery"],"mappings":"CAAA,SAAWA,GACP,GAAIC,GAAUD,EAAEE,QACZC,EAAOF,EAAQG,GAEnBH,GAAQI,WAAoB,SACxBC,WAAY,SAAUC,EAAWL,GAC7BC,EAAK,iCAAkCI,EAEvC,IAAIC,GAAmBD,EAAUE,SAAS,6BAG1C,OAFAD,GAAiBE,KAAK,kBAAkBC,SAEjCH,EAAiBI,QAG5BC,gBAAgB,EAEhBC,aAAc,mBAEdC,gBAAiB,SAAUC,EAAMd,GAC7BC,EAAK,uCAELa,EAAKC,OACD,otBAsBJ,IAAIC,GAAUF,EAAKN,KAAK,oBACxBQ,GAAQC,GAAG,QAAS,SAAUC,GAC1BA,EAAEC,gBAEF,IAAIC,GAAYC,OAAO,qCACnBC,EAAe,2IACfC,EAAQH,EAAUG,MAAMD,EACxBC,IAASA,EAAM,GACfvB,EAAQwB,sBAAsBhB,KAAK,0BAA0BiB,KAAK,MAAO,iCAAmCF,EAAM,IAElHG,MAAM,iCAId,IAAIC,GAASb,EAAKN,KAAK,mBACvBmB,GAAOV,GAAG,QAAS,SAAUC,GACzBA,EAAEC,iBAEFnB,EAAQwB,sBAAsBhB,KAAK,qBAAqBoB,YAAY,yBAAyBC,SAAS,2BAG1G,IAAIC,GAAQhB,EAAKN,KAAK,kBACtBsB,GAAMb,GAAG,QAAS,SAAUC,GACxBA,EAAEC,iBAEFnB,EAAQwB,sBAAsBhB,KAAK,qBAAqBoB,YAAY,0BAA0BC,SAAS,0BAG3G,IAAIE,GAAcjB,EAAKN,KAAK,oBAC5BuB,GAAYd,GAAG,QAAS,WACpB,GAAIe,GAAYhC,EAAQwB,sBAAsBhB,KAAK,0BAC/CyB,EAAaD,EAAUP,KAAK,OAC5BS,EAAUD,EAAWE,QAAQ,UAAW,IAAO,cAAgBJ,EAAYK,GAAG,YAAc,EAAI,EAEpGnC,GAAK,gBAAkBgC,EAAY,YAAcC,GACjDF,EAAUP,KAAK,MAAOS,MAI9BG,gBAAiB,SAAUvB,EAAMT,EAAWL,GACxCC,EAAK,sCAAuCI,EAE5C,IAAI2B,GAAY3B,EAAUG,KAAK,0BAC3BuB,EAAcjB,EAAKN,KAAK,qBACxB8B,EAAMN,EAAUP,KAAK,MAEzBM,GAAYQ,KAAK,UAAWD,EAAIE,QAAQ,uBAIjDC","file":"keditor-component-youtube.min.js","sourcesContent":["(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n\n    KEditor.components['youtube'] = {\n        getContent: function (component, keditor) {\n            flog('getContent \"youtube\" component', component);\n\n            var componentContent = component.children('.keditor-component-content');\n            componentContent.find('.youtube-cover').remove();\n\n            return componentContent.html();\n        },\n\n        settingEnabled: true,\n\n        settingTitle: 'Youtube Settings',\n\n        initSettingForm: function (form, keditor) {\n            flog('initSettingForm \"youtube\" component');\n\n            form.append(\n                '<form class=\"form-horizontal\">' +\n                '   <div class=\"form-group\">' +\n                '       <div class=\"col-sm-12\">' +\n                '           <button type=\"button\" class=\"btn btn-block btn-primary btn-youtube-edit\">Change Video</button>' +\n                '       </div>' +\n                '   </div>' +\n                '   <div class=\"form-group\">' +\n                '       <label class=\"col-sm-12\">Autoplay</label>' +\n                '       <div class=\"col-sm-12\">' +\n                '           <input type=\"checkbox\" id=\"youtube-autoplay\" />' +\n                '       </div>' +\n                '   </div>' +\n                '   <div class=\"form-group\">' +\n                '       <label class=\"col-sm-12\">Aspect Ratio</label>' +\n                '       <div class=\"col-sm-12\">' +\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-youtube-169\">16:9</button>' +\n                '           <button type=\"button\" class=\"btn btn-sm btn-default btn-youtube-43\">4:3</button>' +\n                '       </div>' +\n                '   </div>' +\n                '</form>'\n            );\n\n            var btnEdit = form.find('.btn-youtube-edit');\n            btnEdit.on('click', function (e) {\n                e.preventDefault();\n\n                var inputData = prompt('Please enter Youtube URL in here:');\n                var youtubeRegex = /^(?:http(?:s)?:\\/\\/)?(?:www\\.)?(?:m\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:(?:watch)?\\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\\/))([^\\?&\\\"'>]+)/;\n                var match = inputData.match(youtubeRegex);\n                if (match && match[1]) {\n                    keditor.getSettingComponent().find('.embed-responsive-item').attr('src', 'https://www.youtube.com/embed/' + match[1]);\n                } else {\n                    alert('Your Youtube URL is invalid!');\n                }\n            });\n\n            var btn169 = form.find('.btn-youtube-169');\n            btn169.on('click', function (e) {\n                e.preventDefault();\n\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-4by3').addClass('embed-responsive-16by9');\n            });\n\n            var btn43 = form.find('.btn-youtube-43');\n            btn43.on('click', function (e) {\n                e.preventDefault();\n\n                keditor.getSettingComponent().find('.embed-responsive').removeClass('embed-responsive-16by9').addClass('embed-responsive-4by3');\n            });\n\n            var chkAutoplay = form.find('#youtube-autoplay');\n            chkAutoplay.on('click', function () {\n                var embedItem = keditor.getSettingComponent().find('.embed-responsive-item');\n                var currentUrl = embedItem.attr('src');\n                var newUrl = (currentUrl.replace(/(\\?.+)+/, '')) + '?autoplay=' + (chkAutoplay.is(':checked') ? 1 : 0);\n\n                flog('Current url: ' + currentUrl, 'New url: ' + newUrl);\n                embedItem.attr('src', newUrl);\n            });\n        },\n\n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"youtube\" component', component);\n\n            var embedItem = component.find('.embed-responsive-item');\n            var chkAutoplay = form.find('#youtube-autoplay');\n            var src = embedItem.attr('src');\n\n            chkAutoplay.prop('checked', src.indexOf('autoplay=1') !== -1);\n        }\n    };\n\n})(jQuery);\n"]}