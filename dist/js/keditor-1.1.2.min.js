!function(t){var n=function(){"undefined"!=typeof console&&o.debug===!0&&("Microsoft Internet Explorer"==navigator.appName?1==arguments.length?console.log("[KEditor]",arguments[0]):2==arguments.length?console.log("[KEditor]",arguments[0],arguments[1]):arguments.length>2&&console.log("[KEditor]",arguments[0],arguments[1],arguments[2]):console.log(["KEditor"],arguments))},e=function(t){throw new Error("[KEditor] "+t)};t.fn.draggable||e("$.fn.draggable does not exist. Please import $.fn.draggable into your document for continue using KEditor."),t.fn.droppable||e("$.fn.droppable does not exist. Please import $.fn.droppable into your document for continue using KEditor."),t.fn.sortable||e("$.fn.sortable does not exist. Please import $.fn.sortable into your document for continue using KEditor.");var o=function(n,e){this.options=t.extend({},o.DEFAULTS,e),this.init(n)};o.debug=!0,o.version="1.1.2",o.DEFAULTS={btnMoveContainerText:'<i class="fa fa-sort"></i>',btnMoveComponentText:'<i class="fa fa-arrows"></i>',btnSettingContainerText:'<i class="fa fa-cog"></i>',btnSettingComponentText:'<i class="fa fa-cog"></i>',btnDuplicateContainerText:'<i class="fa fa-files-o"></i>',btnDuplicateComponentText:'<i class="fa fa-files-o"></i>',btnDeleteContainerText:'<i class="fa fa-times"></i>',btnDeleteComponentText:'<i class="fa fa-times"></i>',defaultComponentType:"text",snippetsUrl:"snippets/default/snippets.html",snippetsListId:"keditor-snippets-list",contentAreasSelector:null,iframeMode:!1,contentAreasWrapper:'<div class="keditor-content-areas-wrapper container"></div>',onInitFrame:function(t,n,e){},onSidebarToggled:function(t){},onInitContentArea:function(t){},onContentChanged:function(t){},onInitContainer:function(t){},onBeforeContainerDeleted:function(t,n){},onContainerDeleted:function(t,n){},onContainerChanged:function(t,n){},onContainerDuplicated:function(t,n,e){},onContainerSelected:function(t,n){},onContainerSnippetDropped:function(t,n,e){},onComponentReady:function(t){},onInitComponent:function(t){},onBeforeComponentDeleted:function(t,n){},onComponentDeleted:function(t,n){},onComponentChanged:function(t,n){},onComponentDuplicated:function(t,n,e){},onComponentSelected:function(t,n){},onComponentSnippetDropped:function(t,n,e){},onDynamicContentLoaded:function(t,n,e,o){},onDynamicContentError:function(t,n,e,o){}},o.components={},o.log=n,o.error=e,o.prototype={init:function(e){var o=this,i=o.options;i.iframeMode?e=o.initFrame(e):o.body=t(document.body),o.initContentAreas(e);var a=o.body;a.hasClass("initialized-snippets-list")?n("Snippets list is already initialized!"):(o.initSidebar(),a.addClass("initialized-snippets-list")),a.hasClass("initialized-click-event-handlers")?n("CLick event handlers is already initialized!"):(o.initKEditorClicks(),a.addClass("initialized-click-event-handlers"))},generateId:function(t){var n=(new Date).getTime();return"keditor-"+t+"-"+n},initNiceScroll:function(e){n("initNiceScroll",e),t.fn.niceScroll?(n("Initialize $.fn.niceScroll"),e.niceScroll({cursorcolor:"#999",cursorwidth:6,railpadding:{top:0,right:0,left:0,bottom:0},cursorborder:""})):n("$.fn.niceScroll does not exist. Use default sidebar.")},initFrame:function(e){n("initFrame",e);var i=this,a=i.options,r=e.html(),s=t("<iframe />"),d=i.generateId("frame");e.after(s),s.attr({id:d,"class":"keditor-frame"}),n('Id for keditor frame is: "'+d+'"'),e.css("display","none"),e.attr("data-iframe","#"+d);var c=s.contents(),l=c.find("head"),p=c.find("body");n("Adding styles to iframe...");var f="";t('[data-type="keditor-style"]').each(function(){var n=t(this),e=n.attr("href")||n.attr("data-href")||"";f+=e?'<link rel="stylesheet" type="text/css" href="'+e+'" />\n':'<style type="text/css">'+n.html()+"</style>\n"}),n("Styles: \n"+f),l.append(f),n("All styles are added"),n("Adding original content to iframe...");var m;return a.contentAreasWrapper?(m=t(a.contentAreasWrapper),p.append(m),m.html(r)):p.html(r),a.snippetsListId=o.DEFAULTS.snippetsListId,i.body=p,"function"==typeof a.onInitFrame&&a.onInitFrame.call(s,s,l,p),m||p},initSidebar:function(){n("initSidebar");var i=this,a=i.options,r=i.body;r.addClass("opened-keditor-sidebar"),a.snippetsListId===o.DEFAULTS.snippetsListId?(n("Render default KEditor snippet container"),r.append('<div id="keditor-sidebar">   <a id="keditor-sidebar-toggler"><i class="fa fa-chevron-right"></i></a>   <div id="keditor-snippets-list"></div>   <div id="keditor-snippets-content" style="display: none"></div>   <div id="keditor-setting-panel">       <div id="keditor-setting-header"><span id="keditor-setting-title"></span><a href="#" id="keditor-setting-closer"><i class="fa fa-arrow-right"></i></a></div>       <div id="keditor-setting-body"><div id="keditor-setting-forms"></div></div>   </div></div>'),i.initSidebarToggler()):(n('Render KEditor snippets content after custom snippets list with id="'+a.snippetsListId+'"'),r.find("#"+a.snippetsListId).after('<div id="keditor-snippets-content" style="display: none"></div>')),"string"==typeof a.snippetsUrl&&a.snippetsUrl.length>0?(n('Getting snippets form "'+a.snippetsUrl+'"...'),t.ajax({type:"get",dataType:"html",url:a.snippetsUrl,success:function(t){n("Success in getting snippets",t),i.renderSnippets(t),i.initSnippets(),i.initSnippetsSwitcher(),i.initSettingPanel()},error:function(t){n("Error when getting snippets",t)}})):e('"snippetsUrl" must be not null!')},toggleSidebar:function(t){n("toggleSidebar",t);var e=this,o=e.options,i=e.body,a=i.find("#keditor-sidebar-toggler i");t?(i.addClass("opened-keditor-sidebar"),a.attr("class","fa fa-chevron-right")):(i.removeClass("opened-keditor-sidebar"),a.attr("class","fa fa-chevron-left")),"function"==typeof o.onSidebarToggled&&o.onSidebarToggled.call(null,t)},initSidebarToggler:function(){n("initSidebarToggler");var t=this,e=t.body;e.find("#keditor-sidebar-toggler").on("click",function(n){n.preventDefault(),t.toggleSidebar(!e.hasClass("opened-keditor-sidebar"))})},renderSnippets:function(e){n("renderSnippets",e);var o=this,i=o.options,a=o.body,r="",s="",d="";t("<div />").html(e).find("> div").each(function(e){var o=t(this),i=o.html().trim(),a=o.attr("data-preview"),c=o.attr("data-type"),l="";n("Snippet #"+e+" type="+c,a,i),l+='<section class="keditor-snippet" data-snippet="#keditor-snippet-'+e+'" data-type="'+c+'">',l+='   <img class="keditor-snippet-preview" src="'+a+'" />',l+="</section>","container"===c?r+=l:-1!==c.indexOf("component")&&(s+=l),d+='<script id="keditor-snippet-'+e+'" type="text/html">'+i+"</script>"}),a.find("#"+i.snippetsListId).html('<ul id="keditor-snippets-type-switcher" class="nav nav-tabs nav-justified">    <li class="active"><a href="#keditor-container-snippets">Containers</a></li>    <li><a href="#keditor-component-snippets">Components</a></li></ul><div id="keditor-snippets-container" class="tab-content">   <div class="tab-pane keditor-snippets active" id="keditor-container-snippets">'+r+'</div>   <div class="tab-pane keditor-snippets" id="keditor-component-snippets">'+s+"</div></div>").addClass("loaded-snippets"),a.find("#keditor-snippets-content").html(d)},initSnippets:function(){n("initSnippets");var e=this,o=e.options,i=e.body,a=i.find("#"+o.snippetsListId);e.initNiceScroll(a.find(".keditor-snippets")),n("Initialize $.fn.draggable for container snippets list"),a.find(".keditor-snippet[data-type=container]").draggable({helper:"clone",revert:"invalid",connectToSortable:i.find(".keditor-content-area"),start:function(){t("[contenteditable]").blur(),t(".keditor-container.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),t(".keditor-component.showed-keditor-toolbar").removeClass("showed-keditor-toolbar")},stop:function(){a.find(".keditor-snippet[data-type^=component]").draggable("option","connectToSortable",i.find(".keditor-container-content"))}}),a.find(".keditor-snippet[data-type^=component]").draggable({helper:"clone",revert:"invalid",connectToSortable:i.find(".keditor-container-content"),start:function(){i.find("[contenteditable]").blur(),i.find(".keditor-container.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),i.find(".keditor-component.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),i.addClass("highlighted-container-content")},stop:function(){i.removeClass("highlighted-container-content")}})},initSnippetsSwitcher:function(){n("initSnippetsSwitcher");var e=this,o=e.body,i=o.find("#keditor-snippets-type-switcher li"),a=o.find("#keditor-snippets-container .keditor-snippets");i.find("a").on("click",function(n){n.preventDefault();var e=t(this),r=e.parent(),s=e.attr("href");if(!r.hasClass("active")){var d=i.filter(".active"),c=a.filter(".active"),l=o.find(s);d.removeClass("active"),c.removeClass("active"),r.addClass("active"),l.addClass("active"),t.fn.niceScroll&&(c.getNiceScroll().hide(),l.getNiceScroll().show())}})},initSettingPanel:function(){n("initSettingPanel");var i=this,a=(i.options,i.body);a.find("#keditor-setting-closer").on("click",function(t){t.preventDefault(),i.hideSettingPanel()});var r=a.find("#keditor-setting-forms");i.initNiceScroll(r),n('Call "initSettingForm" function of all component types if settingEnabled = true');for(var s in o.components)if(o.components.hasOwnProperty(s)){var d=o.components[s],c=d.settingEnabled===!0;if(n("Type: "+s+", settingEnabled: "+c),c)if("function"==typeof d.initSettingForm){var l=t('<div id="keditor-setting-'+s+'" data-type="'+s+'" class="keditor-setting-form clearfix"></div>');r.append(l),n('Initialize setting form for component type "'+s+'"'),d.initSettingForm.call(d,l,i)}else e('"initSettingForm" function of component type "'+s+'" does not exist!')}},setSettingComponent:function(t){n("setSettingComponent",t);var e=this,o=e.body;if(t){var i=t.attr("id");o.attr("data-setting-component",i)}else o.removeAttr("data-setting-component")},getSettingComponent:function(){n("getSettingComponent");var t=this,e=t.body,o=e.attr("data-setting-component");return e.find("#"+o)},showSettingPanel:function(t){n("showSettingPanel",t);var i=this,a=i.body;i.setSettingComponent(t);var r=a.find("#keditor-setting-forms").children(".active");r.removeClass("active");var s=i.getComponentType(t),d=o.components[s];a.find("#keditor-setting-title").html(d.settingTitle);var c=a.find("#keditor-setting-"+s);"function"==typeof d.showSettingForm?(n('Show setting form of component type "'+s+'"'),d.showSettingForm.call(d,c,t,i),c.addClass("active")):e('"showSettingForm" function of component type "'+s+'" does not exist!'),i.toggleSidebar(!0),a.addClass("opened-keditor-setting")},hideSettingPanel:function(){n("hideSettingPanel");var t=this,e=t.body;e.removeClass("opened-keditor-setting");var i=e.find("#keditor-setting-forms").children(".active"),a=i.attr("data-type"),r=o.components[a];"function"==typeof r.hideSettingForm&&(n('Hide setting form of component type "'+a+'"'),r.hideSettingForm.call(r,i,t)),i.removeClass("active"),e.removeClass("opened-keditor-setting"),t.setSettingComponent()},getContentAreas:function(e){n("getContentAreas",e);var o,i=this,a=i.options;if(a.contentAreasSelector&&(o=e.find(a.contentAreasSelector)),!o||0===o.length){n("Do not find any content area. Creating default content area..."),o=t("<div />");var r=e.html();o.html(r),e.empty().append(o)}return o},initContentAreas:function(e){n("initContentAreas",e);var o=this,i=o.getContentAreas(e);i.each(function(){var e=t(this),i=e.attr("id")||"";0===i.length&&(n("Content area does not contain Id. Generating id for content area..."),i=o.generateId("content-area"),e.attr("id",i),n('Id for content are is: "'+i+'"')),o.initContentArea(e),e.data("keditor",o)})},initContentArea:function(e){n("initContentArea",e);var o=this,i=o.options,a=o.body;if(e.addClass("keditor-content-area"),n("Initialize $.fn.droppable for content area"),e.droppable({accept:".keditor-snippet[data-type=container]",tolerance:"pointer",greedy:!0}),n("Initialize $.fn.sortable for content area"),e.sortable({handle:".btn-container-reposition",items:"> section",connectWith:".keditor-content-area",axis:"y",tolerance:"pointer",sort:function(){t(this).removeClass("ui-state-default")},receive:function(r,s){n("On received snippet",r,s);var d=s.helper,c=s.item;if(c.is(".keditor-snippet")){var l=a.find(c.attr("data-snippet")).html();n("Snippet content",l);var p=t('<section class="keditor-container">   <section class="keditor-container-inner">'+l+"</section></section>");d.replaceWith(p),p.hasClass("showed-keditor-toolbar")||(t(".keditor-container.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),p.addClass("showed-keditor-toolbar")),"function"==typeof i.onContainerSnippetDropped&&i.onContainerSnippetDropped.call(e,r,p,s.item),o.initContainer(e,p)}"function"==typeof i.onContentChanged&&i.onContentChanged.call(e,r)}}),n("Initialize existing containers in content area"),e.children("section").each(function(){o.convertToContainer(e,t(this))}),"function"==typeof i.onInitContentArea){var r=i.onInitContentArea.call(e,e);r&&r.length>0&&t.each(r,function(){o.convertToContainer(e,t(this))})}},convertToContainer:function(t,e){n("convertToContainer",t,e);var o,i=this,a=e.is("section");a?(e.addClass("keditor-container"),e.wrapInner('<section class="keditor-container-inner"></section>'),o=e):(e.wrap('<section class="keditor-container"><section class="keditor-container-inner"></section></section>'),o=e.parent().parent()),i.initContainer(t,o)},initContainer:function(e,o){n("initContainer",e,o);var i=this,a=i.options;if(o.hasClass("keditor-initialized-container")&&o.hasClass("keditor-initializing-container"))n(o.hasClass("keditor-initialized-container")?"Container is already initialized!":"Container is initializing...");else{o.addClass("keditor-initializing-container"),n("Render KEditor toolbar for container",o),o.append('<div class="keditor-toolbar keditor-toolbar-container">   <a href="#" class="btn-container-reposition">'+a.btnMoveContainerText+'</a>   <a href="#" class="btn-container-duplicate">'+a.btnDuplicateContainerText+'</a>   <a href="#" class="btn-container-delete">'+a.btnDeleteContainerText+"</a></div>");var r=i.generateId("container");n("Id for container is: "+r),o.attr("id",r);var s=o.find('[data-type="container-content"]');n("Initialize "+s.length+" container content(s)"),s.each(function(){var n=t(this);i.initContainerContent(e,o,n)}),"function"==typeof a.onInitContainer&&a.onInitContainer.call(e,o),o.addClass("keditor-initialized-container"),o.removeClass("keditor-initializing-container")}},initContainerContent:function(e,o,i){n("initContainerContent",e,o,i);var a=this,r=a.options,s=a.body,d=a.generateId("container-content");i.addClass("keditor-container-content"),n("Id for container content id: "+d,i),i.attr("id",d),n("Initialize $.fn.droppable for container content"),i.droppable({accept:".keditor-snippet[data-type=component]",tolerance:"pointer",greedy:!0}),n("Initialize $.fn.sortable for container content"),i.sortable({handle:".btn-component-reposition",items:"> section",connectWith:".keditor-container-content",tolerance:"pointer",sort:function(){t(this).removeClass("ui-state-default")},receive:function(o,i){n("On received snippet",o,i);var d,c=i.helper,l=i.item;if(l.is(".keditor-snippet")){var p=s.find(l.attr("data-snippet")).html(),f=l.attr("data-type");n("Snippet content",p);var m=t('<section class="keditor-component" data-type="'+f+'">   <section class="keditor-component-content">'+p+"</section></section>");c.replaceWith(m),d=m.closest(".keditor-container"),"function"==typeof r.onComponentSnippetDropped&&r.onComponentSnippetDropped.call(e,o,m,i.item),a.initComponent(e,d,m)}else d=l.closest(".keditor-container");d.hasClass("showed-keditor-toolbar")||(t(".keditor-container.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),d.addClass("showed-keditor-toolbar")),"function"==typeof r.onContainerChanged&&r.onContainerChanged.call(e,o,d),"function"==typeof r.onContentChanged&&r.onContentChanged.call(e,o)}}),n("Initialize existing components inside container content"),i.children().each(function(){var n=t(this);a.convertToComponent(e,o,n)})},convertToComponent:function(t,e,o){n("convertToComponent",t,e,o);var i,a=this,r=o.is("section");r?(o.addClass("keditor-component"),o.wrapInner('<section class="keditor-component-content"></section>'),i=o):(o.wrap('<section class="keditor-component"><section class="keditor-component-content"></section></section>'),i=o.parent().parent()),a.initComponent(t,e,i)},getComponentType:function(t){n("getComponentType",t);var i=this,a=i.options,r=t.attr("data-type"),s=r?r.replace("component-",""):"";return s&&s in o.components?s:(n(s?'Component type "'+s+'" does not exist':"This component does not contain data-type attribute"),"string"==typeof a.defaultComponentType?s=a.defaultComponentType:"function"==typeof a.defaultComponentType&&(s=a.defaultComponentType.call(t,t)),s||e("Component type is undefined!"),n("Fallback to defaultComponentType: "+s),s)},initComponent:function(i,a,r){n("initComponent",i,a,r);var s=this,d=s.options,c=s.body;if(r.hasClass("keditor-initialized-component")&&r.hasClass("keditor-initializing-component"))n(r.hasClass("keditor-initialized-component")?"Component is already initialized!":"Component is initializing...");else{r.addClass("keditor-initializing-component");var l=s.generateId("component");n("Id for component is: "+l),r.attr("id",l);var p=r.children(".keditor-component-content"),f=s.generateId("component-content");n("Id for component content is: "+f),p.attr("id",f);var m=s.getComponentType(r);n("Component type: "+m);var C=o.components[m],h=C.settingEnabled,u="";h&&(u='<a href="#" class="btn-component-setting">'+d.btnSettingComponentText+"</a>"),n("Render KEditor toolbar for component",r),r.append('<div class="keditor-toolbar keditor-toolbar-component">   <a href="#" class="btn-component-reposition">'+d.btnMoveComponentText+"</a>"+u+'   <a href="#" class="btn-component-duplicate">'+d.btnDuplicateComponentText+'</a>   <a href="#" class="btn-component-delete">'+d.btnDeleteComponentText+"</a></div>");var g=[];r.find("[data-dynamic-href]").each(function(){var n=t(this);g.push(s.initDynamicContent(i,n))}),t.when.apply(null,g).then(function(){"function"==typeof C.init?C.init.call(C,i,a,r,s):(c.removeClass("highlighted-container-content"),e('"init" function of component type "'+m+'" does not exist!')),"function"==typeof d.onInitComponent&&d.onInitComponent.call(i,r),r.addClass("keditor-initialized-component"),r.removeClass("keditor-initializing-component")})}},getClickedElement:function(e,o){n("getClickedElement",e,o);var i=t(e.target),a=i.closest(o);return i.is(o)?i:a.length>0?a:null},initKEditorClicks:function(){n("initKEditorClicks");var e=this,o=e.options,i=e.body;i.on("click",function(t){var a=e.getClickedElement(t,".keditor-container");if(a){if(n("Click on .keditor-container",a,a.hasClass("showed-keditor-toolbar")),!a.hasClass("showed-keditor-toolbar")){i.find(".keditor-container.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),i.find(".keditor-component.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),a.addClass("showed-keditor-toolbar");var r=a.parent();"function"==typeof o.onContainerSelected&&o.onContainerSelected.call(r,t,a)}}else i.find(".keditor-container.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),i.find(".keditor-component.showed-keditor-toolbar").removeClass("showed-keditor-toolbar");var s=e.getClickedElement(t,".keditor-component");if(s){if(n("Click on .keditor-component",s),!s.hasClass("showed-keditor-toolbar")){i.find(".keditor-component.showed-keditor-toolbar").removeClass("showed-keditor-toolbar"),s.addClass("showed-keditor-toolbar");var r=s.parent();"function"==typeof o.onComponentSelected&&o.onComponentSelected.call(r,t,s)}}else i.find(".keditor-component.showed-keditor-toolbar").removeClass("showed-keditor-toolbar")}),i.on("click",".btn-container-duplicate",function(i){i.preventDefault();var a=t(this);n("Click on .btn-container-duplicate",a);var r=a.closest(".keditor-container"),s=r.parent(),d=t(e.getContainerContent(r));r.after(d),e.convertToContainer(s,d),n("Container is duplicated"),"function"==typeof o.onContainerDuplicated&&o.onContainerDuplicated.call(s,r,d),"function"==typeof o.onContentChanged&&o.onContentChanged.call(s,i)}),i.on("click",".btn-container-delete",function(i){i.preventDefault();var a=t(this);if(n("Click on .btn-container-delete",a),confirm("Are you sure that you want to delete this container? This action can not be undo!")){var r=a.closest(".keditor-container"),s=r.find(".keditor-component"),d=r.parent();"function"==typeof o.onBeforeContainerDeleted&&o.onBeforeContainerDeleted.call(d,i,r),s.length>0&&s.each(function(){e.deleteComponent(t(this))}),r.remove(),"function"==typeof o.onContainerDeleted&&o.onContainerDeleted.call(d,i,r),"function"==typeof o.onContentChanged&&o.onContentChanged.call(d,i)}}),i.on("click",".btn-component-setting",function(o){o.preventDefault();var a=t(this);n("Click on .btn-component-setting",a);var r=a.closest(".keditor-component");i.hasClass("opened-keditor-setting")&&i.hasClass("opened-keditor-sidebar")&&r.is(e.getSettingComponent())?e.hideSettingPanel():e.showSettingPanel(r)}),i.on("click",".btn-component-duplicate",function(i){i.preventDefault();var a=t(this);n("Click on .btn-component-duplicate",a);var r=a.closest(".keditor-component"),s=r.closest(".keditor-container"),d=s.parent(),c=t(e.getComponentContent(r));r.after(c),e.convertToComponent(d,s,c),n("Component is duplicated"),"function"==typeof o.onComponentDuplicated&&o.onComponentDuplicated.call(d,r,c),"function"==typeof o.onContainerChanged&&o.onContainerChanged.call(d,i,s),"function"==typeof o.onContentChanged&&o.onContentChanged.call(d,i)}),i.on("click",".btn-component-delete",function(i){i.preventDefault();var a=t(this);if(n("Click on .btn-component-delete",a),confirm("Are you sure that you want to delete this component? This action can not be undo!")){var r=a.closest(".keditor-component"),s=r.closest(".keditor-content-area");"function"==typeof o.onBeforeComponentDeleted&&o.onBeforeComponentDeleted.call(s,i,r),e.deleteComponent(r),"function"==typeof o.onComponentDeleted&&o.onComponentDeleted.call(s,i,r),"function"==typeof o.onContainerChanged&&o.onContainerChanged.call(s,i,r),"function"==typeof o.onContentChanged&&o.onContentChanged.call(s,i)}})},deleteComponent:function(t){n("deleteComponent",t);var i=this,a=i.getComponentType(t),r=o.components[a];"function"==typeof r.destroy?r.destroy.call(r,t,i):e('"destroy" function of component type "'+a+'" does not exist!'),t.remove()},initDynamicContent:function(e,o){n("initDynamicContent",e,o);var i=this,a=i.options,r=o.closest(".keditor-component"),s=o.attr("data-dynamic-href"),d={};return t.each(r.get(0).attributes,function(t,n){if(0===n.name.indexOf("data-")&&"data-dynamic-href"!==n.name&&"data-type"!==n.name){var e=n.name.substr(5).replace(/-(.)/g,function(t,n){return n.toUpperCase()});d[e]=n.value}}),d=t.param(d),n("Dynamic href: "+s,"Data: "+d),t.ajax({url:s,data:d,type:"GET",dataType:"HTML",success:function(t,i,r){n("Dynamic content is loaded",o,t,i,r),o.html(t),"function"==typeof a.onDynamicContentLoaded&&a.onDynamicContentLoaded.call(e,o,t,i,r)},error:function(t,i,r){n("Error when loading dynamic content",o,t,i,r),"function"==typeof a.onDynamicContentError&&a.onDynamicContentError.call(e,o,t,i,r)}})},getComponentContent:function(i){n("getComponentContent",i);var a,r=this,s=(r.options,i.attr("data-type")),d=r.getComponentType(i),c=o.components[d];"function"==typeof c.getContent?a=c.getContent.call(c,i,r):e('"getContent" function of component type "'+d+'" does not exist!');var l=t("<div />").html(a);return l.find("[data-dynamic-href]").each(function(){t(this).html("")}),a=l.html(),'<section data-type="'+s+'">'+a+"</section>"},getContainerContent:function(e){n("getContainerContent",e);var o=this,i=(o.options,e.children(".keditor-container-inner").clone());return i.find("[data-type=container-content]").each(function(){var n=t(this);n.removeClass("keditor-container-content ui-droppable ui-sortable").removeAttr("id"),n.children(".keditor-component").each(function(){var n=t(this);n.replaceWith(o.getComponentContent(n))})}),"<section>"+i.html()+"</section>"}};var i={__init:function(e){return t(this).each(function(){var i=t(this);if(i.data("keditor"))n("KEditor is already initialized!");else{var a=new o(i,e);i.data("keditor",a)}})},getContent:function(n){var e=t(this),o=e.data("keditor"),i=o.options,a=[];return e=i.iframeMode?o.body:e,e.find(".keditor-content-area").each(function(){var n="";t(this).children(".keditor-container").each(function(){var e=t(this);n+=o.getContainerContent(e,i)}),a.push(n)}),n?a:a.join("\n")},getOptions:function(){var n=t(this).data("keditor");return n.options}};t.keditor=o,t.fn.keditor=function(t){return i[t]&&"init"!==t?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e("Method "+t+" does not exist on $.fn.keditor"):i.__init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=keditor-1.1.2.min.js.map
