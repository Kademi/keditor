{"version":3,"sources":["keditor-component-audio.js"],"names":["$","KEditor","keditor","flog","log","components","getContent","component","componentContent","children","audio","find","unwrap","html","settingEnabled","settingTitle","initSettingForm","form","append","showSettingForm","options","fileInput","btnAudioFileInput","off","on","e","preventDefault","trigger","file","this","files","test","type","attr","URL","createObjectURL","load","showSettingPanel","alert","autoplayToggle","checked","removeAttr","showcontrolsToggle","audioWidth","css","value","jQuery"],"mappings":"CAAA,SAAWA,GACP,GAAIC,GAAUD,EAAEE,QACZC,EAAOF,EAAQG,GAEnBH,GAAQI,WAAkB,OACtBC,WAAY,SAAUC,EAAWL,GAC7BC,EAAK,0CAEL,IAAIK,GAAmBD,EAAUE,SAAS,8BACtCC,EAAQF,EAAiBG,KAAK,QAGlC,OAFAD,GAAME,SAECJ,EAAiBK,QAG5BC,gBAAgB,EAEhBC,aAAc,iBAEdC,gBAAiB,SAAUC,EAAMf,GAC7BC,EAAK,wBAAyBc,GAE9BA,EAAKC,OACD,8oCAgCRC,gBAAiB,SAAUF,EAAMV,EAAWL,GACxCC,EAAK,oCAAqCc,EAAMV,EAEhD,IAAIa,GAAUlB,EAAQkB,QAElBV,EAAQH,EAAUI,KAAK,SACvBU,EAAYJ,EAAKN,KAAK,mBACtBW,EAAoBL,EAAKN,KAAK,sBAClCW,GAAkBC,IAAI,SAASC,GAAG,QAAS,SAAUC,GACjDA,EAAEC,iBAEFL,EAAUM,QAAQ,WAEtBN,EAAUE,IAAI,UAAUC,GAAG,SAAU,WACjC,GAAII,GAAOC,KAAKC,MAAM,EAClB,SAAQC,KAAKH,EAAKI,OAGlBtB,EAAMuB,KAAK,MAAOC,IAAIC,gBAAgBP,IAEtClB,EAAM0B,KAAK,WACPlC,EAAQmC,iBAAiB9B,EAAWa,MAGxCkB,MAAM,6CAId,IAAIC,GAAiBtB,EAAKN,KAAK,kBAC/B4B,GAAehB,IAAI,SAASC,GAAG,QAAS,SAAUC,GAC1CI,KAAKW,QACL9B,EAAMuB,KAAK,WAAY,YAEvBvB,EAAM+B,WAAW,aAIzB,IAAIC,GAAqBzB,EAAKN,KAAK,sBACnC+B,GAAmBnB,IAAI,SAASC,GAAG,QAAS,SAAUC,GAC9CI,KAAKW,QACL9B,EAAMuB,KAAK,WAAY,YAEvBvB,EAAM+B,WAAW,aAIzB,IAAIE,GAAa1B,EAAKN,KAAK,eAC3BgC,GAAWpB,IAAI,UAAUC,GAAG,SAAU,WAClCd,EAAMkC,IAAI,QAASf,KAAKgB,MAAQ,UAI7CC","file":"keditor-component-audio.min.js","sourcesContent":["(function ($) {\n    var KEditor = $.keditor;\n    var flog = KEditor.log;\n    \n    KEditor.components['audio'] = {\n        getContent: function (component, keditor) {\n            flog('getContent \"audio\" component, component');\n            \n            var componentContent = component.children('.keditor-component-content');\n            var audio = componentContent.find('audio');\n            audio.unwrap();\n            \n            return componentContent.html();\n        },\n        \n        settingEnabled: true,\n        \n        settingTitle: 'Audio Settings',\n        \n        initSettingForm: function (form, keditor) {\n            flog('init \"audio\" settings', form);\n            \n            form.append(\n                '<form class=\"form-horizontal\">' +\n                '     <div class=\"form-group\">' +\n                '         <label for=\"audioFileInput\" class=\"col-sm-12\">Audio file</label>' +\n                '         <div class=\"col-sm-12\">' +\n                '             <div class=\"audio-toolbar\">' +\n                '                 <a href=\"#\" class=\"btn-audioFileInput btn btn-sm btn-primary\"><i class=\"fa fa-upload\"></i></a>' +\n                '                 <input id=\"audioFileInput\" type=\"file\" style=\"display: none\" />' +\n                '             </div>' +\n                '         </div>' +\n                '     </div>' +\n                '     <div class=\"form-group\">' +\n                '         <label for=\"audio-autoplay\" class=\"col-sm-12\">Autoplay</label>' +\n                '         <div class=\"col-sm-12\">' +\n                '             <input type=\"checkbox\" id=\"audio-autoplay\" />' +\n                '         </div>' +\n                '     </div>' +\n                '     <div class=\"form-group\">' +\n                '         <label for=\"audio-showcontrols\" class=\"col-sm-12\">Show Controls</label>' +\n                '         <div class=\"col-sm-12\">' +\n                '             <input type=\"checkbox\" id=\"audio-showcontrols\" checked />' +\n                '         </div>' +\n                '     </div>' +\n                '     <div class=\"form-group\">' +\n                '         <label for=\"audio-width\" class=\"col-sm-12\">Width (%)</label>' +\n                '         <div class=\"col-sm-12\">' +\n                '             <input type=\"number\" id=\"audio-width\" min=\"20\" max=\"100\" class=\"form-control\" value=\"100\" />' +\n                '         </div>' +\n                '     </div>' +\n                '</form>'\n            );\n        },\n        \n        showSettingForm: function (form, component, keditor) {\n            flog('showSettingForm \"audio\" component', form, component);\n            \n            var options = keditor.options;\n            \n            var audio = component.find('audio');\n            var fileInput = form.find('#audioFileInput');\n            var btnAudioFileInput = form.find('.btn-audioFileInput');\n            btnAudioFileInput.off('click').on('click', function (e) {\n                e.preventDefault();\n                \n                fileInput.trigger('click');\n            });\n            fileInput.off('change').on('change', function () {\n                var file = this.files[0];\n                if (/audio/.test(file.type)) {\n                    // Todo: Upload to your server :)\n                    \n                    audio.attr('src', URL.createObjectURL(file));\n                    \n                    audio.load(function () {\n                        keditor.showSettingPanel(component, options);\n                    });\n                } else {\n                    alert('Your selected file is not an audio file!');\n                }\n            });\n            \n            var autoplayToggle = form.find('#audio-autoplay');\n            autoplayToggle.off('click').on('click', function (e) {\n                if (this.checked) {\n                    audio.attr('autoplay', 'autoplay');\n                } else {\n                    audio.removeAttr('autoplay');\n                }\n            });\n            \n            var showcontrolsToggle = form.find('#audio-showcontrols');\n            showcontrolsToggle.off('click').on('click', function (e) {\n                if (this.checked) {\n                    audio.attr('controls', 'controls');\n                } else {\n                    audio.removeAttr('controls');\n                }\n            });\n            \n            var audioWidth = form.find('#audio-width');\n            audioWidth.off('change').on('change', function () {\n                audio.css('width', this.value + '%');\n            });\n        }\n    };\n})(jQuery);\n"]}